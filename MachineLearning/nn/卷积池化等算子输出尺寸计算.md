# 卷积、池化、反卷积、空洞卷积输出大小计算

参数定义：

- 输入图像大小：$H \times W$
- 卷积核大小：$K_h \times K_w$
- 填充大小：$P_h$ 和 $P_w$ 分别为行填充和列填充的一半
- 步长：$S_h$ 和 $S_w$

## 卷积

- 输出高：$\lfloor (H - K_h + 2 P_h) / S_h  + 1 \rfloor$
- 输出宽：$\lfloor (W- K_w + 2 P_w) / S_w  + 1 \rfloor$
- 输出形状：$\lfloor (H - K_h + 2 P_h) / S_h  + 1 \rfloor \times \lfloor (W - K_w + 2 P_w) / S_w  + 1 \rfloor$

```python
import troch
x = torch.randn(1, 3, 224, 224)
conv = torch.nn.Conv2d(3, 64, kernel_size=3, stride=2, padding=1)
print(x.shape)
print(conv(x).shape)
```

```shell
torch.Size([1, 3, 224, 224])
torch.Size([1, 64, 112, 112])
```

计算：

- $H_{out} = \lfloor (224 - 3 + 2 \cdot 1) / 2 + 1 \rfloor = \lfloor 112.5 \rfloor = 112$
- $W_{out} = \lfloor (224 - 3 + 2 \cdot 1) / 2 + 1 \rfloor = \lfloor 112.5 \rfloor = 112$

## 池化 (汇聚)

- 输出高：$$
